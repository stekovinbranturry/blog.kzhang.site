---
title: React16.0到React17.0都有哪些新特性
date: 2020-10-19 20:27:33
tags:
  - react
  - 前端
categories:
  - [技术, 前端, react]
---

最近团队所有前端仓库终于都完成了React 15到React 16的迁移，真是大快人心。之前在公司的一年都是用的React 15在写项目，也就意味着无法使用hooks，无法使用Fragment等。其实我刚学React的时候React 16.8，也就是hooks那一版已经发布了，但说实话除了一些比较重要的变化，React 15到16乃至刚发布的17.0之间到底发生了什么事情，知道的还是不全面的。因为这次就好好总结一下从React16.0到17.0的所有新特性。

<!-- more -->

| React 版本 | 发布时间   | 新特性                                                       |
| ---------- | ---------- | ------------------------------------------------------------ |
| v16.0      | 2017.09.26 | 1. 新的render返回类型：数组和字符串<br>2. 更好的错误处理<br>3. Portals<br>4. 更好的SSR<br>5. 支持自定义DOM属性<br/>6. 减小文件体积<br/>7. 加入MIT licence<br/>8. Fiber |
| v16.1      | 2017.11.09 | 1. React Reconciler (Experimental)<br>2. React Call Return (Experimental) |
| v16.2      | 2017.11.28 | Fragment                                                     |
| v16.3      | 2018.03.29 | 1. 新的生命周期<br>2. 官方Context API<br>3. createRef<br>4. forwardRef<br>5. 严格模式组件 |
|            |            |                                                              |
|            |            |                                                              |
|            |            |                                                              |
|            |            |                                                              |
|            |            |                                                              |
|            |            |                                                              |
|            |            |                                                              |


下面捡一些比较重要的进行详细说明

## 1. render支持返回更多类型

React15: 只可以返回单一组件，即使只有一个string一个number也需要用一个tag包裹，如：
```JS
function demo() {
  return <div>hello</div>;
}
```

React 16: 可以返回以下类型：

#### 1. React element

#### 2. 数组或fragment，使得render方法可以返回多个元素

```JS
function demo() {
  return <Fragment>
    <div>hello</div>
    <div>react</div>
  </Fragment>;
}
```
```JS
function demo() {
  return <>
    <div>hello</div>
    <div>react</div>
  </>;
}
```
```JS
function demo() {
  return [
    <div>hello</div>,
    <div>react</div>
  ];
}
```

以上三个是等效的

#### 3. Portals，可以渲染子节点到不同的DOM子树

#### 4. string / number, 渲染为一个文本节点

#### 5. boolean / null，什么都不渲染

主要用于支持
```js
function demo() {
  return state && <>
    <div>hello</div>
    <div>react</div>
  </>;
}
```