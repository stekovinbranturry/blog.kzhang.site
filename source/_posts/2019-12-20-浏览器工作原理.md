---
title: 浏览器工作原理
date: 2019-12-20 00:34:12
tags:
  - 浏览器
category:
  - [学习笔记, 浏览器工作原理, 概览]
---

最近在学习一门关于浏览器工作原理与实践的课程，感觉受益匪浅，浏览器作为前端开发的核心载体，学习它的原理的必要性自然是不言而喻。

接下来的一段时间，我会写一系列的博客，既是自己的学习笔记，也是对相关知识的总结和延伸。也希望可以帮助到大家。

# 浏览器的进化路线

## 应用程序 Web 化

浏览器自诞生起，它的地位就一直很重要，而且随着云计算和前端技术的快速发展，这种重要性会不断加强。时至今日，越来越多的应用转向了浏览器 / 服务器（B/S)架构，浏览器大概已经成为了操作系统上的操作系统。比如微软强大的 office 365，web 端的功能丝毫不逊色。今年 5 月，更是发布了网页版[Visual Studio](https://online.visualstudio.com/environments), 通过云计算，将这款极其优秀的 IDE 搬到了网页上。还有 Electron 的出现，本质上是一个被 JavaScript 控制的精简版的 Chromium 浏览器，使得利用 web 技术可以开发出跨平台的桌面应用。

<!-- more -->

## Web 应用移动化

对于移动设备应用，Web 天生具有开放的基因，虽然在技术层面还有问题尚待解决（比如，渲染流程过于复杂且性能不及原生应用、离线时用户无法使用、无法接收消息推送、移动端没有一级入口），但 Google 推出了 PWA 方案来整合 Web 和本地程序各自的优势。

## Web 操作系统化

Web 操作系统有两层含义：一是利用 Web 技术构建一个操作系统，如 ChromeOS；二是底层结构往操作系统架构方向发展，比如：

- Chrome 朝着 SOA(Service-Oriented Architecture 面向服务架构)的方向演化
- 在浏览器中引入多种编程语言的支持，而不仅限于 JavaScript，比如 12 月 5 号 WebAssembly 正式成为 W3C 标准的 Web 新语言
- 简化渲染流程，使得渲染过程更加直接高效
- 提供对复杂 Web 项目开发的支持

# 学习浏览器工作原理的必要性

## 准确评估 Web 开发项目的可行性

前面说了应用程序 Web 化的趋势，所以了解浏览器底层原理，可以让你更准确地决定是否可以用 Web 来开发你的项目

## 从更高维度审视页面

作为开发者，需要站在用户体验角度来考虑页面性能。几个常见的用户体验指标：

- 请求网页时，如果 1 秒钟之内看不到关键内容，用户会产生任务被中断的感觉
- 当点击按钮时，100ms 没有相应，用户会有延迟感
- 当 Web 中的动画没有达到 60fps，用户会感觉到动画的卡顿

然而这些用户体验的重要指标是有一系列复杂的因素导致的。

我们把浏览器看做一个黑盒，左边输入一个 URL，经过处理后右边返回预期效果。如果不了解黑盒运作机制，当然也可以用实践来优化代码。但如果了解黑盒运作机制，我们就可以站在更高维度审视项目，通过全视野快速定位问题所在。

比如，首屏渲染就涉及了 DNS, HTTP, DOM 解析, CSS 阻塞, JS 阻塞等诸多方面的技术因素，任何一项没有优化好都会导致页面的延时。

了解浏览器工作原理后，我们可以把知识串成线连成网，形成自己的知识体系，学会快速定位和解决问题。

## 在快速的技术迭代中把握本质

从 2011 年开始，前端技术开始了大爆炸，往往有种学不到的感绝望感。然而日月之行，星汉灿烂，都逃不过其原理。

自 Node.js 诞生以来，其生态空前繁荣，已形成了一个庞大的生态系统。为何它会发展的如此之快？根本原因还是以往的浏览器功能和前端技术不足以支撑日益增长的需求。随着脚本执行效率的提高，页面渲染性能的提升和开发工具链的完善，接下来随着核心技术逐渐可以支撑核心需求，前端生态也就将会进入平稳发展期

如果了解浏览器的工作原理，那么你会更加深刻理解当前的技术，它的不足之处，演化方向等

# 前端技术的演进

根据现有的不足和诉求，前端技术正在推进的演化和趋势

## 脚本执行速度问题

针对 JS 设计缺陷和执行效率的问题，可以从以下两个途径去解决：

- 不断修订语言本身，我们熟悉的 ES5 到 ES6 的大变革，接下来还有 ES7, ES8, ES9...

- 颠覆性使用新语言，前面提到的 WebAssembly

## 前端模块化开发

随着 Web 工程的复杂度的提高，模块化开发需求也就随之产生，于是出现了 WebComponents 标准，前端框架如 React, Vue 都在渐进适应标准，同时框架的最佳实践也会反过来影响 WebComponents 标准的制定

了解浏览器工作原理，会对 WebComponents 中涉及的 Shadow DOM, HTML Templates 等技术有更深刻的理解和体会

## 渲染效率问题

如果理解浏览器的渲染流程，那么就会知道目前页面的渲染存在的缺陷，从而清楚如何去规避它们，开发出更优秀的 Web 应用

同时，Chrome 团队也在着手改变这些缺陷，比如开发下一代布局方案 LayoutNG, 还有渲染瘦身方案 Slim Paint，其目的都是让渲染更加简单高效

**综上所述，了解浏览器工作原理能让你站在更高的维度去理解前端**
